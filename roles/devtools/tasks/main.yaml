---

- name: download nodejs
  ansible.builtin.get_url:
    url: "{{ node_bin_url }}"
    dest: "{{ node_dest }}"

- name: create nodejs directory
  become: yes
  ansible.builtin.file:
    path: "{{ node_dir }}"
    state: directory
    mode: o=rx

- name: install nodejs
  become: yes
  ansible.builtin.unarchive:
    src: "{{ node_dest }}"
    remote_src: yes
    dest: "{{ node_dir }}"
    mode: o=rx

- name: change PATH on bashrc to include nodejs binaries
  ansible.builtin.lineinfile:
    line: "export PATH={{ node_bin_path }}:$PATH"
    path: "{{ ansible_env.HOME }}/.bashrc"
